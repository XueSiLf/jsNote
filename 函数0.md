# js函数

[TOC]

## 函数定义和调用【ok 留心匿名函数】

### 定义函数（3种定义函数的方法：箭头函数、匿名函数、普通定义方法）

#### 方法1：

~~~javascript
// 求绝对值
function abs(x) {
    if (x >= 0) {
        return x;
    } else {
        return -x;
    }   
}
~~~

【留心：】没有return语句，返回undefined；

js函数也是一个对象。上述定义的`abs()`函数实际上是一个函数对象，而函数名`abs`可以视为指向该函数的变量。

#### 方法2：

~~~javascript
var abs = function(x) {
    if (x >= 0) {
        return x;
    } else {
        return -x;
    }
};
~~~

在这种方式下，`function (x) { ... }`是一个匿名函数，它没有函数名。但是，这个匿名函数赋值给了变量`abs`，所以，通过变量`abs`就可以调用该函数。

上述两种定义*完全等价*，注意第二种方式按照完整语法需要在函数体末尾加一个`;`，表示赋值语句结束。

【留心：】匿名函数可以赋值给变量，可以通过变量调用函数。匿名函数需要加【分号】表示结束。



### 调用函数：【ok】

~~~javascript
abs(10);// 返回10
abs(-1);// 返回1
~~~

由于JavaScript允许传入任意个参数而不影响调用，因此传入的参数比定义的参数多也没有问题，虽然函数内部并不需要这些参数：

【留心：函数可以传入多个参数，即使不需要】

~~~javascript
abs(10, 'fafafas');// 返回10
abs(-1, 'fa', 'fafa', null);//返回1
~~~

传入的参数比定义的少也没有问题：

【留心：函数传入的参数少也没问题】

~~~js
abs();// 返回NaN
~~~

此时`abs(x)`函数的参数`x`将收到`undefined`，计算结果为`NaN`。



#### 对调用函数时参数进行检查：避免收到undefined

~~~javascript
function abs(x) {
    if (typeof x !== 'number') {
        // 非数字则丢出一个异常
        throw 'Not a number';
    }
    if (x >= 0) {
        return x;
    } else {
        return -x;
    }
}
~~~



#### 函数参数arguments个数的特殊性：

JavaScript还有一个【免费赠送的关键字】`arguments`，它只在函数内部起作用，并且永远指向当前函数的调用者传入的所有参数。`arguments`类似`Array`但它不是一个`Array`：

免费赠送的

函数内部起作用

类似数组，但又不是数组

~~~javascript
// 普通函数
'use strict';
function foo(x) {
    console.log('x = ' + x);
    for (var i=0;i<arguments.length;i++) {
        console.log('arg' + i + '=' + arguments[i]);
    }
}
foo(10, 20, 30);
结果：
10
arg0=10
arg1=20
arg2=30

// 匿名函数
'use strict';
var foo = function (x) {
    console.log(x);
    for (var i = 0; i < arguments.length; i++) {
        console.log('arg' + i + '=' + arguments[i]);
    }
};
foo(1,2,3);
结果：
1
arg0=1
arg1=2
arg2=3

// 箭头函数
'use strict';
var foo = (x) => {
    console.log(x);
    for (var i = 0; i < arguments.length; i++) {
        console.log('arg' + i + '=' + arguments[i]);
    }
}
foo(1,2,3);
结果：报错
1
Uncaught ReferenceError: arguments is not defined
    at foo (<anonymous>:4:25)
    at <anonymous>:8:1
~~~

【这个特殊参数在箭头函数中不起作用】









变量作用域和解析赋值【重点：未掌握】

方法

高阶函数

闭包

箭头函数

generator